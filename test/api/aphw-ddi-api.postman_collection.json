{
	"info": {
		"_postman_id": "e8c094da-72fe-41d7-8e10-8acfdddf5a23",
		"name": "aphw-ddi-api",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12107479"
	},
	"item": [
		{
			"name": "CDO",
			"item": [
				{
					"name": "User can add a Cdo and view Cdo, Dog and Owner",
					"item": [
						{
							"name": "/cdo submits a valid CDO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner).to.deep.include({",
											"        \"firstName\": `Homer${cdoPostIndex}`,",
											"        \"lastName\": `Simpson${cdoPostIndex}`,",
											"        \"birthDate\": \"1998-05-10\",",
											"        \"address\": {",
											"            \"addressLine1\": `${cdoPostIndex} Anywhere St`,",
											"            \"addressLine2\": \"Anywhere Estate\",",
											"            \"town\": \"City of London\",",
											"            \"postcode\": \"S1 1AA\",",
											"            \"country\": \"England\"",
											"        }",
											"    })",
											"    pm.expect(owner.personReference).to.be.a('string')",
											"});",
											"",
											"pm.test(\"response returns enforcement details\", function () {",
											"    const enforcementDetails = pm.response.json().enforcementDetails;",
											"    pm.expect(enforcementDetails.policeForce).to.be.a('string')",
											"    pm.expect(enforcementDetails.court).to.be.a('string')",
											"    pm.expect(enforcementDetails.legislationOfficer).to.equal('Sidney Lewis')",
											"});",
											"",
											"pm.test(\"dog details\", function () {",
											"    const dogs = pm.response.json().dogs;",
											"    const dog = dogs[0]",
											"    pm.expect(dogs).to.have.length(1)",
											"    pm.expect(dog.indexNumber.startsWith('ED3')).to.be.true",
											"    pm.expect(dog.name).to.eq(`Rex${cdoPostIndex}`)",
											"    pm.expect(dog.status).to.eq('Interim exempt')",
											"    pm.expect(dog.breed).to.eq('XL Bully')",
											"    pm.expect(dog.cdoIssued).to.eq('2023-10-10')",
											"    pm.expect(dog.cdoExpiry).to.eq('2023-12-10')",
											"    pm.expect(dog.interimExemption).to.eq('2023-12-10')",
											"    pm.collectionVariables.set(\"index-number\",  dog.indexNumber);",
											"});",
											"",
											"cdoPostIndex++",
											"pm.environment.set(\"cdoPostIndex\", cdoPostIndex);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "af8c36fe-42f8-4398-999a-e8e15e5ed506"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "9038ec55-1ee0-496d-b1bc-6a36f5408eab"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"Homer{{cdoPostIndex}}\",\n    \"lastName\": \"Simpson{{cdoPostIndex}}\",\n    \"dateOfBirth\": \"1998-05-10\",\n    \"address\": {\n      \"addressLine1\": \"{{cdoPostIndex}} Anywhere St\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"City of London\",\n      \"postcode\": \"S1 1AA\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"Rex{{cdoPostIndex}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/cdo submits a valid CDO with different country",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.address.country).to.equal('Wales')",
											"    pm.collectionVariables.set('welshCdo', owner.personReference)",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "5f2541e1-5c2b-4193-aef5-a0be9827dec7"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "7a4ac284-a656-4f6f-a9d9-746bfaec1875"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"dateOfBirth\": \"1998-05-10\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"{{$randomCity}}\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"Wales\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"Rex{{cdoPostIndex}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/cdo/:index-number returns a 200 and valid cdo",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns a person\", function () {",
											"    const owner = pm.response.json().cdo.person;",
											"    pm.expect(owner.id).to.be.a('number')",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"});",
											"",
											"pm.test(\"response returns a dog\", function () {",
											"    const dog = pm.response.json().cdo.dog;",
											"    pm.expect(dog.id).to.be.a('number')",
											"    pm.expect(dog.indexNumber).to.eq(pm.collectionVariables.get('index-number'))",
											"});",
											"",
											"pm.test(\"response returns an exemption\", function () {",
											"    const exemption = pm.response.json().cdo.exemption;",
											"    pm.expect(exemption.exemptionOrder).to.be.a('string')",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "6169a309-d61d-481f-8eff-4f223a49aac6"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "025b1d7b-46c9-4f4a-8bab-4c7028e6a6d9"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo/{{index-number}}",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo",
										"{{index-number}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/cdo/:invalid-index returns a 404",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response returns a 404\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "226d891a-dde5-4870-807e-9a6ec5af2566"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "6bca522a-02c3-4d69-a1a3-1313c5f97452"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo/ED000018",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo",
										"ED000018"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog/:index-number returns 200 and a valid dog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns a dog\", function () {",
											"    const dog = pm.response.json().dog;",
											"    pm.expect(dog.id).to.be.a('number')",
											"    pm.expect(dog.indexNumber).to.eq(pm.collectionVariables.get('index-number'))",
											"    pm.expect(dog.name).to.be.a('string')",
											"    pm.expect(dog.breed).to.be.oneOf(['XL Bully', 'Pit Bull Terrier','Japanese Tosa','Dogo Argentino','Fila Brasileiro'])",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "629aa7ec-a46b-47d8-965d-48f24203b7d5"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "8e631f82-012f-4a26-8132-d03cd42daebb"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog/{{index-number}}",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog",
										"{{index-number}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog/:invalid-index-number returns a 404",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is not found\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "0f11f716-a616-45c2-b769-f25eb2950f99"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "ae6da238-d05e-432f-be56-29b90bdaae16"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog/ED000018",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog",
										"ED000018"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog-owner/:index-number",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns the owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.personReference).to.be.a('string')",
											"    pm.collectionVariables.set('reference', owner.personReference)",
											"    pm.collectionVariables.set('owner', JSON.stringify(owner))",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "73d9e6a1-1d58-4d14-b890-d87dbad1ae28"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "49b3340a-4879-42f4-b5d7-392a00ba343d"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog-owner/{{index-number}}",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog-owner",
										"{{index-number}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog-owner/:invalid-index-number returns a 404",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is not found\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "4cde75dc-d3c8-4083-b42f-b63f66a72358"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "28ee16f7-3f0e-4c3e-9deb-e4c1ef7cd203"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog-owner/ED000018",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog-owner",
										"ED000018"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog returns 200",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns a dog\", function () {",
											"    const dog = pm.response.json();",
											"    pm.expect(dog.index_number).to.eq(pm.collectionVariables.get('index-number'))",
											"    pm.expect(dog.name).to.eq('Rex alive')",
											"    pm.expect(dog.status.status).to.equal('Interim exempt')",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "9b0b6d29-ff17-44f7-a111-b86c783c883c"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "86bc5288-9993-4024-94a2-0eb156a120fe"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"dogId\": \"{{index-number}}\",\n    \"indexNumber\": \"{{index-number}}\",\n    \"breed\": \"XL Bully\",\n    \"name\": \"Rex alive\",\n    \"applicationType\": \"cdo\",\n    \"cdoIssued\": \"2023-10-10\",\n    \"cdoExpiry\": \"2023-12-10\",\n    \"interimExemption\": \"2023-12-10\",\n    \"status\": \"Interim exempt\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog"
									]
								}
							},
							"response": []
						},
						{
							"name": "/person/:reference should get person data",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns the owner\", function () {",
											"    const owner = pm.response.json();",
											"    pm.expect(owner.personReference).to.eq(pm.collectionVariables.get('reference'))",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"    ",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "a1c8e0c4-b2be-4b24-bae8-97c945b11f02"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "865ddac6-1b54-413b-a16b-8068c26e05fd"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/person/{{reference}}",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"person",
										"{{reference}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "/person/:invalid-reference should return a 400",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(400);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "451e9411-350d-4270-bac6-aad4472fbf25"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "4ac035d3-78ac-4be8-933a-7785f2990d8d"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"personReference\": \"invalid\",\n  \"firstName\": \"{{$randomFirstName}}\",\n  \"lastName\": \"{{$randomLastName}}\",\n  \"dateOfBirth\": \"{{$isoTimestamp}}\",\n  \"address\": {\n    \"addressLine1\": \"{{$randomStreetAddress}}\",\n    \"town\": \"{{$randomCity}}\",\n    \"postcode\": \"SN1 1AA\",\n    \"country\": \"England\"\n  },\n  \"email\": \"{{$randomExampleEmail}}\",\n  \"primaryTelephone\": \"{{$randomPhoneNumber}}\",\n  \"secondaryTelephone\": \"{{$randomPhoneNumber}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/person",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"person"
									]
								}
							},
							"response": []
						},
						{
							"name": "/cdo submits a valid CDO with an existing owner",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    const request = JSON.parse(pm.request.body.raw)",
											"    pm.expect(owner.personReference).to.eq(request.owner.personReference)",
											"",
											"    ",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"    pm.expect(owner.lastName).to.be.a('string')",
											"    pm.expect(owner.address.addressLine1).to.be.a('string')",
											"    pm.expect(owner.address.country).to.eq('Wales')",
											"    pm.expect(owner.personReference).to.eq(pm.collectionVariables.get('welshCdo'))",
											"});",
											"",
											"cdoPostIndex++",
											"pm.environment.set(\"cdoPostIndex\", cdoPostIndex);",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "29c1f852-95b1-4f53-bac9-9c8b41130866"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "49fc0968-820e-49fd-8056-240efaacc273"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"dateOfBirth\": \"{{$isoTimestamp}}\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"City of London\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"England\"\n    },\n    \"personReference\": \"{{welshCdo}}\"\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"Rex{{cdoPostIndex}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/cdo submits a valid CDO with an existing owner and existing dog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    const request = JSON.parse(pm.request.body.raw)",
											"    pm.expect(owner.personReference).to.eq(request.owner.personReference)",
											"",
											"    ",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"    pm.expect(owner.lastName).to.be.a('string')",
											"    pm.expect(owner.address.addressLine1).to.be.a('string')",
											"    pm.expect(owner.address.country).to.eq('Wales')",
											"    pm.expect(owner.personReference).to.eq(pm.collectionVariables.get('welshCdo'))",
											"});",
											"",
											"cdoPostIndex++",
											"pm.environment.set(\"cdoPostIndex\", cdoPostIndex);",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "8488a960-6a4a-44fc-9825-1cca43948ff2"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "3237319d-6ee4-4d0d-aa91-8b581da77c4e"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"dateOfBirth\": \"{{$isoTimestamp}}\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"City of London\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"England\"\n    },\n    \"personReference\": \"{{welshCdo}}\"\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"Rex{{cdoPostIndex}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/person/:reference should update person",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const isEdited = (str) => str.split(' ')[1] === 'EDITED'",
											"",
											"pm.test(\"response returns the owner\", function () {",
											"    const owner = pm.response.json();",
											"    pm.expect(owner.personReference).to.eq(pm.collectionVariables.get('reference'))",
											"    pm.expect(isEdited(owner.firstName)).to.be.true",
											"    pm.expect(isEdited(owner.lastName)).to.be.true",
											"    pm.expect(owner.address.addressLine1).to.contain('EDITED')",
											"    pm.expect(owner.address.country).to.eq('England')",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "ff82e404-9afe-4983-a5b2-822ab892c8e4"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "488950dc-7639-45d9-8d9d-16f363a398bd"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"personReference\": \"{{reference}}\",\n  \"firstName\": \"{{$randomFirstName}} EDITED\",\n  \"lastName\": \"{{$randomLastName}} EDITED\",\n  \"dateOfBirth\": \"1998-05-10T00:00:00.000Z\",\n  \"address\": {\n    \"addressLine1\": \"{{$randomStreetAddress}} EDITED\",\n    \"town\": \"City of London\",\n    \"postcode\": \"S1 1AA\",\n    \"country\": \"England\"\n  }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/person",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"person"
									]
								}
							},
							"response": []
						},
						{
							"name": "/activity should submit an activity",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response a list of dog activities\", function () {",
											"    const activity = pm.response.json()",
											"    pm.expect(activity.result).to.eq('ok')",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "f4febbe0-6217-4592-9148-c26dbec18533"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "566a4e2e-3c48-41d9-830f-b2f1b29c97c8"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"activity\":\"1\",\n  \"activityType\":\"sent\",\n  \"pk\":\"{{reference}}\",\n  \"source\":\"owner\",\n  \"activityDate\":\"2024-02-29T09:30:13.587Z\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/activity",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"activity"
									]
								}
							},
							"response": []
						},
						{
							"name": "/exemption returns 200",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns a dog\", function () {",
											"    const exemption = pm.response.json();",
											"    pm.expect(exemption.dog_id).to.eq(parseInt(pm.collectionVariables.get('index-number').replace('ED','')))",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "a6dc5401-c430-4423-92fc-e9c4a68ba26c"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "2eb6ce37-a710-4aca-8c19-c1c8db2711be"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"exemptionOrder\": 2023,\n  \"indexNumber\": \"{{index-number}}\",\n  \"cdoIssued\": \"2020-01-01\",\n  \"cdoExpiry\": \"2020-02-01\",\n  \"policeForce\": \"Avon and Somerset Constabulary\",\n  \"legislationOfficer\": \"Test Officer\",\n  \"certificateIssued\": \"2020-03-01\",\n  \"applicationFeePaid\": \"2020-03-01\",\n  \"neuteringConfirmation\": \"2020-04-01\",\n  \"microchipVerification\": \"2020-04-01\",\n  \"joinedExemptionScheme\": \"2020-05-01\",\n  \"insurance\": {\n    \"company\": \"Dogs Trust\",\n    \"renewalDate\": \"2020-06-01\"\n  }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/exemption",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"exemption"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Summary Cdos",
					"item": [
						{
							"name": "1-Setup",
							"item": [
								{
									"name": "Add Pre-Exempt Scott Pilgrim",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "ddi-username",
												"value": "internal-user",
												"type": "text",
												"uuid": "31fbcb7a-c397-4033-8922-0c0737bb1146"
											},
											{
												"key": "ddi-displayname",
												"value": "User, Internal",
												"type": "text",
												"uuid": "059b5c4e-0de9-4e5d-9995-5d145093774f"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner\": {\n        \"firstName\": \"Scott\",\n        \"lastName\": \"Pilgrim\",\n        \"personReference\": null,\n        \"address\": {\n            \"addressLine1\": \"SHEAF STREET\",\n            \"town\": \"SHEFFIELD\",\n            \"postcode\": \"S1 2BP\",\n            \"country\": \"England\"\n        }\n    },\n    \"enforcementDetails\": {\n        \"court\": null,\n        \"policeForce\": \"5\",\n        \"legislationOfficer\": \"\"\n    },\n    \"dogs\": [\n        {\n            \"breed\": \"Pit Bull Terrier\",\n            \"name\": \"\",\n            \"applicationType\": \"cdo\",\n            \"cdoIssued\": \"2024-01-01T00:00:00.000Z\",\n            \"cdoExpiry\": \"2024-04-19T00:00:00.000Z\",\n            \"interimExemption\": null\n        }\n    ]\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdo",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdo"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add  Pre-Exempt Ramona Flowers",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "ddi-username",
												"value": "internal-user",
												"type": "text",
												"uuid": "c67ed589-629b-49d8-8b5f-00beff18cc78"
											},
											{
												"key": "ddi-displayname",
												"value": "User, Internal",
												"type": "text",
												"uuid": "bc083c9d-702f-4b62-92b4-b80f2a8f7819"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner\": {\n        \"firstName\": \"Ramona\",\n        \"lastName\": \"Flowers\",\n        \"personReference\": null,\n        \"address\": {\n            \"addressLine1\": \"FLAT 33, HOMEFERN HOUSE, COBBS PLACE\",\n            \"town\": \"MARGATE\",\n            \"postcode\": \"CT9 1JF\",\n            \"country\": \"England\"\n        }\n    },\n    \"enforcementDetails\": {\n        \"court\": null,\n        \"policeForce\": \"24\",\n        \"legislationOfficer\": \"\"\n    },\n    \"dogs\": [\n        {\n            \"breed\": \"Japanese Tosa\",\n            \"name\": \"\",\n            \"applicationType\": \"cdo\",\n            \"cdoIssued\": \"2024-01-01\",\n            \"cdoExpiry\": \"2024-04-21\",\n            \"interimExemption\": null\n        }\n    ]\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdo",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdo"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add Pre-Exempt Che Adams",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "ddi-username",
												"value": "internal-user",
												"type": "text",
												"uuid": "942399a5-682b-4d83-a3de-5c6155ff46a1"
											},
											{
												"key": "ddi-displayname",
												"value": "User, Internal",
												"type": "text",
												"uuid": "038671ed-456b-492a-831d-d1d4d43c3c39"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner\": {\n        \"firstName\": \"Che\",\n        \"lastName\": \"Adams\",\n        \"personReference\": null,\n        \"address\": {\n            \"addressLine1\": \" 12A, MORANT ROAD\",\n            \"town\": \"RINGWOOD\",\n            \"postcode\": \"BH24 1SX\",\n            \"country\": \"England\"\n        }\n    },\n    \"enforcementDetails\": {\n        \"court\": null,\n        \"policeForce\": \"21\",\n        \"legislationOfficer\": \"\"\n    },\n    \"dogs\": [\n        {\n            \"breed\": \"Japanese Tosa\",\n            \"name\": \"\",\n            \"applicationType\": \"cdo\",\n            \"cdoIssued\": \"2024-01-01\",\n            \"cdoExpiry\": \"2024-05-31\",\n            \"interimExemption\": null\n        }\n    ]\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdo",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdo"
											]
										}
									},
									"response": []
								},
								{
									"name": "Add Interim exempt Ricardo Scimeca",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "ddi-username",
												"value": "internal-user",
												"type": "text",
												"uuid": "d19dbc7c-3c70-4070-882b-40c2a3acc0bc"
											},
											{
												"key": "ddi-displayname",
												"value": "User, Internal",
												"type": "text",
												"uuid": "9393acb7-d119-4c11-bea5-9df0d21b420e"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"owner\": {\n        \"firstName\": \"Ricardo\",\n        \"lastName\": \"Scimeca\",\n        \"personReference\": null,\n        \"address\": {\n            \"addressLine1\": \"FLAT 1, FERRYMANS QUAY\",\n            \"town\": \"WILLIAM MORRIS WAY\",\n            \"postcode\": \"SW6 2UT\",\n            \"country\": \"England\"\n        }\n    },\n    \"enforcementDetails\": {\n        \"court\": null,\n        \"policeForce\": \"30\",\n        \"legislationOfficer\": \"\"\n    },\n    \"dogs\": [\n        {\n            \"breed\": \"Japanese Tosa\",\n            \"name\": \"\",\n            \"applicationType\": \"interim-exemption\",\n            \"cdoIssued\": null,\n            \"cdoExpiry\": null,\n            \"interimExemption\": \"2024-04-22\"\n        }\n    ]\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdo",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdo"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "2-Tests",
							"item": [
								{
									"name": "Sorting",
									"item": [
										{
											"name": "/cdos - sort by Police Force ASC",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"const isInAscendingOrder = () => { ",
															"    const currentPoliceForce = { value: '' }",
															"",
															"    return (cdo) => {",
															"        const policeForce = cdo.exemption.policeForce",
															"        const isInOrder = policeForce.localeCompare(currentPoliceForce.value) >= 0",
															"        if (!isInOrder) {",
															"            console.error(currentPoliceForce.value)",
															"            console.error(policeForce, currentPoliceForce.value)",
															"        }",
															"        currentPoliceForce.value = policeForce",
															"        return isInOrder",
															"    }",
															"}",
															"",
															"const cdos = pm.response.json().cdos;",
															"",
															"pm.test(\"response is ok\", function () {",
															"    pm.response.to.have.status(200);",
															"})",
															"",
															"pm.test(\"results are in descending order by joinedExemptionScheme\", function () {",
															"    pm.expect(cdos.every(isInAscendingOrder())).to.be.true;",
															"})"
														],
														"type": "text/javascript",
														"packages": {}
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{DDI_API_BASE_URL}}/cdos?status=PreExempt&sortKey=policeForce",
													"host": [
														"{{DDI_API_BASE_URL}}"
													],
													"path": [
														"cdos"
													],
													"query": [
														{
															"key": "status",
															"value": "PreExempt"
														},
														{
															"key": "sortKey",
															"value": "policeForce"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "/cdos - sort by Lastname ASC",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"const isInAscendingOrder = () => { ",
															"    const currentOwner = { value: '' }",
															"",
															"    return (cdo) => {",
															"        const owner = cdo.person.lastName + ' ' + cdo.person.firstName",
															"        const isInOrder = owner.localeCompare(currentOwner.value) >= 0",
															"        if (!isInOrder) {",
															"            console.error(currentOwner.value)",
															"            console.error(owner, currentOwner.value)",
															"        }",
															"        currentOwner.value = owner",
															"        return isInOrder",
															"    }",
															"}",
															"",
															"const cdos = pm.response.json().cdos;",
															"",
															"pm.test(\"response is ok\", function () {",
															"    pm.response.to.have.status(200);",
															"})",
															"",
															"pm.test(\"results are in descending order by joinedExemptionScheme\", function () {",
															"    pm.expect(cdos.every(isInAscendingOrder())).to.be.true;",
															"})"
														],
														"type": "text/javascript",
														"packages": {}
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{DDI_API_BASE_URL}}/cdos?status=PreExempt&sortKey=owner",
													"host": [
														"{{DDI_API_BASE_URL}}"
													],
													"path": [
														"cdos"
													],
													"query": [
														{
															"key": "status",
															"value": "PreExempt"
														},
														{
															"key": "sortKey",
															"value": "owner"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "/cdos - sort by IndexNumber DESC",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"const isInAscendingOrder = () => { ",
															"    const currentDogId = { value: 99999999 }",
															"",
															"    return (cdo) => {",
															"        const dogId = cdo.dog.id",
															"        const isInOrder = dogId <= currentDogId.value",
															"        if (!isInOrder) {",
															"            console.error(currentDogId.value)",
															"            console.error(cdo.dog.id, currentDogId.value)",
															"        }",
															"        currentDogId.value = dogId",
															"        return isInOrder",
															"    }",
															"}",
															"",
															"const cdos = pm.response.json().cdos;",
															"",
															"pm.test(\"response is ok\", function () {",
															"    pm.response.to.have.status(200);",
															"})",
															"",
															"pm.test(\"results are in descending order by joinedExemptionScheme\", function () {",
															"    pm.expect(cdos.every(isInAscendingOrder())).to.be.true;",
															"})"
														],
														"type": "text/javascript",
														"packages": {}
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{DDI_API_BASE_URL}}/cdos?status=PreExempt&sortKey=indexNumber&sortOrder=DESC",
													"host": [
														"{{DDI_API_BASE_URL}}"
													],
													"path": [
														"cdos"
													],
													"query": [
														{
															"key": "status",
															"value": "PreExempt"
														},
														{
															"key": "sortKey",
															"value": "indexNumber"
														},
														{
															"key": "sortOrder",
															"value": "DESC"
														}
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "/cdos - with Pre-Exempt status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"/* ",
													"    Response has the following structure",
													"    {",
													"        \"cdos\": [",
													"            {",
													"                \"person\": {",
													"                    \"id\": 19,",
													"                    \"firstName\": \"Scott\",",
													"                    \"lastName\": \"Pilgrim\",",
													"                    \"personReference\": \"P-DCAC-AE23\"",
													"                },",
													"                \"dog\": {",
													"                    \"id\": 300024,",
													"                    \"status\": \"Pre-exempt\",",
													"                    \"dogReference\": \"ED300024\"",
													"                },",
													"                \"exemption\": {",
													"                    \"policeForce\": \"Cheshire Constabulary\",",
													"                    \"cdoExpiry\": \"2024-04-19\",",
													"                    \"joinedExemptionScheme\":  \"2024-04-19\"",
													"                }",
													"            }",
													"        ]",
													"    }",
													"*/",
													"const isPreExempt = cdo => {",
													"    return cdo.dog.status === 'Pre-exempt'",
													"}",
													"",
													"const cdos = pm.response.json().cdos;",
													"",
													"",
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"    const [cdo] = cdos",
													"    pm.expect(cdo.person.id).to.be.a('number')",
													"    pm.expect(cdo.person.firstName).to.be.a('string')",
													"    pm.expect(cdo.person.lastName).to.be.a('string')",
													"    pm.expect(cdo.person.personReference).to.be.a('string')",
													"    pm.expect(cdo.person.id).to.be.a('number')",
													"    pm.expect(cdo.dog.id).to.be.a('number')",
													"    pm.expect(cdo.dog.status).to.equal('Pre-exempt')",
													"    pm.expect(cdo.exemption.policeForce).to.be.a('string')",
													"    pm.expect(cdo.exemption.cdoExpiry).to.be.a('string')",
													"    pm.expect(cdo.exemption.joinedExemptionScheme).not.to.be.undefined",
													"})",
													"",
													"pm.test(\"only contains Pre-Exempt\", function () {",
													"    pm.expect(cdos.every(isPreExempt)).to.be.true;",
													"})"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdos?status=PreExempt",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdos"
											],
											"query": [
												{
													"key": "status",
													"value": "PreExempt"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "/cdos - with array of statuses",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const isPreExemptOrInterimExempt = cdo => {",
													"    return cdo.dog.status === 'Pre-exempt' || cdo.dog.status === 'Interim exempt'",
													"}",
													"const cdos = pm.response.json().cdos;",
													"",
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"})",
													"",
													"pm.test(\"only contains Pre-Exempt and Interim exempt\", function () {",
													"    pm.expect(cdos.every(isPreExemptOrInterimExempt)).to.be.true;",
													"})"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdos?status=PreExempt&status=InterimExempt",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdos"
											],
											"query": [
												{
													"key": "status",
													"value": "PreExempt"
												},
												{
													"key": "status",
													"value": "InterimExempt"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "/cdos - with sorted ASC InterimExempt",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const isInterimExempt = cdo => {",
													"    return cdo.dog.status === 'Interim exempt'",
													"}",
													"",
													"const isInAscendingOrder = () => { ",
													"    const currentCdo = { value: new Date(0) }",
													"",
													"    return (cdo) => {",
													"        const joinedExemptionScheme = new Date(cdo.exemption.joinedExemptionScheme)",
													"        const isInOrder = joinedExemptionScheme >= currentCdo.value",
													"        if (!isInOrder) {",
													"            console.error(currentCdo.value)",
													"            console.error(cdo.exemption.joinedExemptionScheme, currentCdo.value)",
													"        }",
													"        currentCdo.value = joinedExemptionScheme",
													"        return isInOrder",
													"    }",
													"}",
													"",
													"const cdos = pm.response.json().cdos;",
													"",
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"})",
													"",
													"pm.test(\"results are in descending order by joinedExemptionScheme\", function () {",
													"    pm.expect(cdos.every(isInAscendingOrder())).to.be.true;",
													"})"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdos?status=InterimExempt&sortKey=joinedExemptionScheme&sortOrder=ASC",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdos"
											],
											"query": [
												{
													"key": "status",
													"value": "InterimExempt"
												},
												{
													"key": "sortKey",
													"value": "joinedExemptionScheme"
												},
												{
													"key": "sortOrder",
													"value": "ASC"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "/cdos - with sorted DESC InterimExempt Copy",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const isInterimExempt = cdo => {",
													"    return cdo.dog.status === 'Interim exempt'",
													"}",
													"",
													"const isInDescendingOrder = () => { ",
													"    const currentCdo = { value: new Date('9999-12-31') }",
													"",
													"    return (cdo) => {",
													"        const joinedExemptionScheme = new Date(cdo.exemption.joinedExemptionScheme)",
													"        const isInOrder = joinedExemptionScheme <= currentCdo.value",
													"        if (!isInOrder) {",
													"            console.error(currentCdo.value)",
													"            console.error(cdo.exemption.joinedExemptionScheme, currentCdo.value)",
													"        }",
													"        currentCdo.value = joinedExemptionScheme",
													"        return isInOrder",
													"    }",
													"}",
													"",
													"const cdos = pm.response.json().cdos;",
													"",
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"})",
													"",
													"pm.test(\"results are in descending order by joinedExemptionScheme\", function () {",
													"    pm.expect(cdos.every(isInDescendingOrder())).to.be.true;",
													"})"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdos?status=InterimExempt&sortKey=joinedExemptionScheme&sortOrder=DESC",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdos"
											],
											"query": [
												{
													"key": "status",
													"value": "InterimExempt"
												},
												{
													"key": "sortKey",
													"value": "joinedExemptionScheme"
												},
												{
													"key": "sortOrder",
													"value": "DESC"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "/cdos - due in 30 days",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const isPreExemptAndInThirtyDays = cdo => {",
													"    return ['Scott', 'Ramona'].includes(cdo.person.firstName) &&",
													"        ['Pilgrim', 'Flowers'].includes(cdo.person.lastName)",
													"}",
													"",
													"const cdos = pm.response.json().cdos;",
													"",
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(200);",
													"})",
													"",
													"pm.test(\"only contains Pre-Exempt\", function () {",
													"    pm.expect(cdos.every(isPreExemptAndInThirtyDays)).to.be.true;",
													"})"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdos?status=PreExempt&withinDays=30",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdos"
											],
											"query": [
												{
													"key": "status",
													"value": "PreExempt"
												},
												{
													"key": "withinDays",
													"value": "30"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "/cdos - invalid",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"response is ok\", function () {",
													"    pm.response.to.have.status(400);",
													"})"
												],
												"type": "text/javascript",
												"packages": {}
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{DDI_API_BASE_URL}}/cdos",
											"host": [
												"{{DDI_API_BASE_URL}}"
											],
											"path": [
												"cdos"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "3-Teardown",
							"item": []
						}
					]
				}
			]
		},
		{
			"name": "System can import",
			"item": [
				{
					"name": "/dog imports a valid dog",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"    pm.response.to.have.body(\"ok\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "e034ba11-206e-44a1-800c-6a728dea117f"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "0527def5-6b4c-45a3-9ecd-f94257807ad6"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"dog\": {\n      \"dog_breed_id\":1,\n      \"dog_reference\": \"{{$guid}}\",\n      \"status_id\": 1,\n      \"name\": \"{{$randomFirstName}}\",\n      \"birth_date\": \"{{$isoTimestamp}}\",\n      \"death_date\": \"{{$isoTimestamp}}\",\n      \"tattoo\":\"tattoo\",\n      \"colour\": \"colour\",\n      \"sex\": \"Male\",\n      \"exported_date\": \"{{$isoTimestamp}}\",\n      \"stolen_date\": \"{{$isoTimestamp}}\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/dog",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"dog"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Activities",
			"item": [
				{
					"name": "/activities/sent/dog should return list of dog activities",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response a list of dog activities\", function () {",
									"    const activities = pm.response.json().activities;",
									"    pm.expect(activities.length > 1).to.be.true;",
									"    pm.expect(activities[0].label).to.be.a('string')",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "ab963598-c9af-469f-8c6d-f32bdcaffa8a"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "af9834df-b86d-418a-b03f-50c1a4b4d36e"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/activities/sent/dog",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"activities",
								"sent",
								"dog"
							]
						}
					},
					"response": []
				},
				{
					"name": "/activities/received/dog should return list of dog activities Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response a list of dog activities\", function () {",
									"    const activities = pm.response.json().activities;",
									"    pm.expect(activities.length > 1).to.be.true;",
									"    pm.expect(activities[0].label).to.be.a('string')",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "32e94d87-ccef-4893-86b5-879e923e79b1"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "78475bc7-234d-4e7f-95ff-031cd697d3ee"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/activities/received/dog",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"activities",
								"received",
								"dog"
							]
						}
					},
					"response": []
				},
				{
					"name": "/activities/sent/owner should return list of owner activities",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response a list of owner activities\", function () {",
									"    const activities = pm.response.json().activities;",
									"    pm.expect(activities.length > 0).to.be.true;",
									"    pm.expect(activities[0].label).to.be.a('string')",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "9c1d37c6-ee12-4f8f-8fbe-a7ed7466ddc9"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "ad1a72e5-bdde-4f54-b240-210f6a61944f"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/activities/sent/owner",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"activities",
								"sent",
								"owner"
							]
						}
					},
					"response": []
				},
				{
					"name": "/activities/received/owner should return an empty list of owner received activities",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response a list of owner activities\", function () {",
									"    const activities = pm.response.json().activities;",
									"    pm.expect(activities).to.be.a('Array')",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "6a311703-5ef5-4cde-9770-76dceeba331b"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "c80bdbad-237f-49e9-8189-ecf5917fcb40"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/activities/received/owner",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"activities",
								"received",
								"owner"
							]
						}
					},
					"response": []
				},
				{
					"name": "/activity/:activity-id should return an activity",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response a list of dog activities\", function () {",
									"    const activity = pm.response.json().activity;",
									"    pm.expect(activity.label).to.be.a('string')",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "c3f2af27-9f70-4fb3-bfc4-d4437031c2ac"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "00b758ea-ba07-4823-bc3f-5289a4dbcf8a"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/activity/1",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"activity",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Person",
			"item": [
				{
					"name": "persons DOB check includes empty fields",
					"item": [
						{
							"name": "Setup data for the DOB test - add person 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"    pm.expect(owner.lastName).to.be.a('string')",
											"",
											"    pm.collectionVariables.set(\"duplicateFirstName\", owner.firstName);",
											"    pm.collectionVariables.set(\"duplicateLastName\", owner.lastName);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "702502e0-f1f2-4a69-9907-3541459ab2df"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "c3ea7de2-8d1d-431d-bd55-e098640b000b"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"dateOfBirth\": \"1990-01-01\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"{{$randomCity}}\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"Wales\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"{{$randomFirstName}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "Setup data for the DOB test - add person 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"    pm.expect(owner.lastName).to.be.a('string')",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "048f0dda-d051-4c57-b784-2624f549faa0"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "b4187830-4134-49ac-b6cd-3406d73986cd"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{duplicateFirstName}}\",\n    \"lastName\": \"{{duplicateLastName}}\",\n    \"dateOfBirth\": \"2000-02-02\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"{{$randomCity}}\",\n      \"postcode\": \"RG1 1AA\",\n      \"country\": \"England\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"{{$randomFirstName}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "Setup data for the DOB test - add person 3",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"let cdoPostIndex = pm.environment.get(\"cdoPostIndex\");",
											"",
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response returns an owner\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.firstName).to.be.a('string')",
											"    pm.expect(owner.lastName).to.be.a('string')",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "24fc54c1-3f4e-4a7c-934b-c6230c73c969"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "b7f1ed1e-0877-40ce-a9f5-73a327c3870c"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{duplicateFirstName}}\",\n    \"lastName\": \"{{duplicateLastName}}\",\n    \"dateOfBirth\": null,\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"{{$randomCity}}\",\n      \"postcode\": \"RG1 1AA\",\n      \"country\": \"England\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"{{$randomFirstName}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/persons returns results with empty DOB",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test('GET /persons search on DOB should return results with empty DOB', () => {",
											"    const response = pm.response.json()",
											"    pm.expect(response.persons).to.be.a('array')",
											"    pm.expect(response.persons).to.have.length(2)",
											"})"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/persons?firstName={{duplicateFirstName}}&lastName={{duplicateLastName}}&dateOfBirth=1990-01-01",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"persons"
									],
									"query": [
										{
											"key": "firstName",
											"value": "{{duplicateFirstName}}"
										},
										{
											"key": "lastName",
											"value": "{{duplicateLastName}}"
										},
										{
											"key": "dateOfBirth",
											"value": "1990-01-01"
										}
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"packages": {},
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"packages": {},
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Update Birth Date on empty Birth Date applies change",
					"item": [
						{
							"name": "Setup data for DOB update test",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response has no DOB\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.birthDate).to.be.null;",
											"});",
											"",
											"pm.test(\"response has personReference\", function () {",
											"     pm.expect(pm.response.json()).to.be.an('object');",
											"     pm.expect(pm.response.json()).to.have.property('owner');",
											"     pm.expect(pm.response.json().owner).to.have.property('personReference');",
											"     pm.collectionVariables.set(\"ownerWithoutBirthDateRef\", pm.response.json().owner.personReference);",
											"});",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "a7e43c41-f2de-4ddf-88f2-3f0d36572f26"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "552d738e-75a0-4f93-8330-1b8b33bfc775"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"City of London\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"Wales\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"Rex{{cdoPostIndex}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "Should update birth date if it is null",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"response has a DOB\", function () {",
											"    const owner = pm.response.json().owner;",
											"    pm.expect(owner.birthDate).to.eq(\"1998-10-20\");",
											"});",
											"",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "cdc6e80d-f825-4e69-aa29-590e50a0ded4"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "7dee578a-bfc2-4aa7-8e45-ce285fc5b475"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"dateOfBirth\": \"1998-10-20\",\n    \"personReference\": \"{{ownerWithoutBirthDateRef}}\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"City of London\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"Wales\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"Rex{{cdoPostIndex}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/persons returns an array of persons",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"returns a person with DOB fixed\", function () {",
											"    const response = pm.response.json()",
											"    pm.expect(response.birthDate).to.equal(\"1998-10-20\")",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/person/{{ownerWithoutBirthDateRef}}",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"person",
										"{{ownerWithoutBirthDateRef}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "/persons returns an array of persons Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"returns a persons array\", function () {",
									"    const response = pm.response.json()",
									"    pm.expect(response.persons).to.be.a('array')",
									"    pm.expect(response.persons.length < 100).to.be.true",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/persons?firstName=Dan&lastName=Jones&dateOfBirth=2000-01-01",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"persons"
							],
							"query": [
								{
									"key": "firstName",
									"value": "Dan"
								},
								{
									"key": "lastName",
									"value": "Jones"
								},
								{
									"key": "dateOfBirth",
									"value": "2000-01-01"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/persons returns an array of persons given firstName only",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"returns a persons array\", function () {",
									"    const response = pm.response.json()",
									"    pm.expect(response.persons).to.be.a('array')",
									"    pm.expect(response.persons.length < 100).to.be.true",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/persons?firstName=dan",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"persons"
							],
							"query": [
								{
									"key": "firstName",
									"value": "dan"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/persons returns an array of persons given firstName and lastName",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"returns a persons array\", function () {",
									"    const response = pm.response.json()",
									"    pm.expect(response.persons).to.be.a('array')",
									"    pm.expect(response.persons.length < 100).to.be.true",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/persons?firstName=dan&lastName=Jones",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"persons"
							],
							"query": [
								{
									"key": "firstName",
									"value": "dan"
								},
								{
									"key": "lastName",
									"value": "Jones"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/persons returns an array of persons given lowercase search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"returns a persons array\", function () {",
									"    const response = pm.response.json()",
									"    pm.expect(response.persons).to.be.a('array')",
									"    pm.expect(response.persons.length < 100).to.be.true",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/persons?firstName=dan&lastName=jones&dateOfBirth=2000-01-01",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"persons"
							],
							"query": [
								{
									"key": "firstName",
									"value": "dan"
								},
								{
									"key": "lastName",
									"value": "jones"
								},
								{
									"key": "dateOfBirth",
									"value": "2000-01-01"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/persons returns an array of persons Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"returns a persons array\", function () {",
									"    const response = pm.response.json()",
									"    pm.expect(response.persons).to.be.a('array')",
									"    pm.expect(response.persons.length < 100).to.be.true",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/persons",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"persons"
							],
							"query": [
								{
									"key": "",
									"value": null,
									"disabled": true
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Dog",
			"item": [
				{
					"name": "Delete",
					"item": [
						{
							"name": "Setup",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response is ok\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"dog details\", function () {",
											"    const dogs = pm.response.json().dogs;",
											"    const dog = dogs[0]",
											"    pm.collectionVariables.set(\"dogIndexToDelete\",  dog.indexNumber);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "b3ae8be5-2ba8-450b-a84e-ce622bb4c54c"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "c20a3011-f3d9-4bed-a66b-b7585a6031cc"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"owner\": {\n    \"firstName\": \"{{$randomFirstName}}\",\n    \"lastName\": \"{{$randomLastName}}\",\n    \"dateOfBirth\": \"{{$isoTimestamp}}\",\n    \"address\": {\n      \"addressLine1\": \"{{$randomStreetAddress}}\",\n      \"addressLine2\": \"Anywhere Estate\",\n      \"town\": \"City of London\",\n      \"postcode\": \"S1 1AA\",\n      \"country\": \"Wales\"\n    }\n  },\n  \"enforcementDetails\": {\n    \"court\": \"1\",\n    \"policeForce\": \"1\",\n    \"legislationOfficer\": \"Sidney Lewis\"\n  },\n  \"dogs\": [\n    {\n      \"breed\": \"XL Bully\",\n      \"name\": \"{{$randomFirstName}}\",\n      \"applicationType\": \"cdo\",\n      \"cdoIssued\": \"2023-10-10\",\n      \"cdoExpiry\": \"2023-12-10\",\n      \"interimExemption\": \"2023-12-10\",\n      \"status\": \"Status 1\"\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/cdo",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"cdo"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog invalid",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response returns 404 given invalid dog index number requested\", function () {",
											"    pm.response.to.have.status(404);",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "6151420a-ec9e-4f7b-b5ba-ddccc33539b2"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "a52bc1e8-1980-4f34-a6a2-55940437f4cb"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog/ED9999999999",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog",
										"ED9999999999"
									]
								}
							},
							"response": []
						},
						{
							"name": "/dog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"response returns a 204 and empty body given\", function () {",
											"    pm.response.to.have.status(204);",
											"    const body = pm.response.body",
											"    pm.expect(body).to.eq(undefined)",
											"});"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "ddi-username",
										"value": "internal-user",
										"type": "text",
										"uuid": "11a1a952-69f7-42a9-8ab9-7274b8d2a002"
									},
									{
										"key": "ddi-displayname",
										"value": "User, Internal",
										"type": "text",
										"uuid": "f93f93b7-416e-46a9-b950-07ca0cdf31a0"
									}
								],
								"url": {
									"raw": "{{DDI_API_BASE_URL}}/dog/{{dogIndexToDelete}}",
									"host": [
										"{{DDI_API_BASE_URL}}"
									],
									"path": [
										"dog",
										"{{dogIndexToDelete}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Courts",
			"item": [
				{
					"name": "courts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"response returns list of courts\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.courts.length > 100).to.be.true",
									"    pm.expect(jsonData.courts[0].id).to.be.a('number')",
									"    pm.expect(jsonData.courts[0].name).to.be.a('string')",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"response returns the created court\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.be.a('number')",
									"    pm.expect(jsonData.name).to.eq('Reading County Court and Family Court')",
									"    pm.collectionVariables.set('courtId', jsonData.id)",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "33761101-52be-4ffa-b8ae-85ac067005fc"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "ddd11292-65eb-4a29-ad00-fb09bfe23065"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Reading County Court and Family Court\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts/:invalid-court-id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(404);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts/-1",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts",
								"-1"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts duplicates should fail",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response should fail\", function () {",
									"    pm.response.to.have.status(409);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Reading County Court and Family Court\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts duplicates should fail case insensitive",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response should fail\", function () {",
									"    pm.response.to.have.status(409);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Reading County Court and family court\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts/:court-id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(204);",
									"    const body = pm.response.body",
									"    pm.expect(body).to.eq(undefined)",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "b8a15594-bac1-4bd6-a3ce-f26118c09ab7"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "673bb73c-63c1-4fc8-af23-9d9721f766ae"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts/{{courtId}}",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts",
								"{{courtId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts Deleted courts should be recreated",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"response returns the created court\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.be.a('number')",
									"    pm.expect(jsonData.name).to.eq('Reading County Court and Family Court')",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "b1f89747-4a86-4e14-8bfe-b071c6b5d6c7"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "2feb0224-e693-46cc-95ad-de1b2449ffcc"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Reading County Court and Family Court\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts"
							]
						}
					},
					"response": []
				},
				{
					"name": "/courts/:court-id Teardown",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(204);",
									"    const body = pm.response.body",
									"    pm.expect(body).to.eq(undefined)",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"type": "text",
								"uuid": "5439285b-6203-4b73-878f-91f27e78f4bb"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"type": "text",
								"uuid": "be3f8300-f201-48c8-a186-63e4d7149d0a"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/courts/{{courtId}}",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"courts",
								"{{courtId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Police",
			"item": [
				{
					"name": "/police-forces",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"response returns list of police forces\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.policeForces.length > 50).to.be.true",
									"    pm.expect(jsonData.policeForces[0].id).to.be.a('number')",
									"    pm.expect(jsonData.policeForces[0].name).to.be.a('string')",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"response returns the created Police Force\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.be.a('number')",
									"    pm.expect(jsonData.name).to.eq('The Shire Shirriffs Constabulary')",
									"    pm.collectionVariables.set('policeId', jsonData.id)",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"uuid": "aae72a63-cccf-4308-a0ae-f189793399c0"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"uuid": "bb178a08-508b-4f79-b580-7f83b022f7eb"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"The Shire Shirriffs Constabulary\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces/:invalid-court-id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(404);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces/-1",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces",
								"-1"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces duplicates should fail",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response should fail\", function () {",
									"    pm.response.to.have.status(409);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"The Shire Shirriffs Constabulary\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces duplicates should fail case insensitive",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response should fail\", function () {",
									"    pm.response.to.have.status(409);",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"The Shire shirriffs Constabulary\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces/:police-id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(204);",
									"    const body = pm.response.body",
									"    pm.expect(body).to.eq(undefined)",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"uuid": "cc2da141-f06f-4f30-9b1f-bdfa1ab4bd12"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"uuid": "4034bc7c-a05d-44e8-b646-06975dcce8ef"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces/{{policeId}}",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces",
								"{{policeId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces Deleted police forces should be recreated",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"response returns the created police force\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.be.a('number')",
									"    pm.expect(jsonData.name).to.eq('The Shire Shirriffs Constabulary')",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"uuid": "f1248cae-aeaf-4f30-85f7-16bc57b97542"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"uuid": "14ba8ff5-a273-4322-b0a6-ed6ed5370b37"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"The Shire Shirriffs Constabulary\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces"
							]
						}
					},
					"response": []
				},
				{
					"name": "/police-forces/:police-id Teardown",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(204);",
									"    const body = pm.response.body",
									"    pm.expect(body).to.eq(undefined)",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "ddi-username",
								"value": "internal-user",
								"uuid": "55049e93-95bf-4c86-9cff-69c78c4157e6"
							},
							{
								"key": "ddi-displayname",
								"value": "User, Internal",
								"uuid": "3ecd5c7e-b5a9-450a-8f0f-48fccd90b2f4"
							}
						],
						"url": {
							"raw": "{{DDI_API_BASE_URL}}/police-forces/{{policeId}}",
							"host": [
								"{{DDI_API_BASE_URL}}"
							],
							"path": [
								"police-forces",
								"{{policeId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "countries",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"response is ok\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"pm.test(\"response returns list of countries\", function () {",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.countries).to.have.lengthOf(3)",
							"    pm.expect(jsonData.countries).to.deep.eq(['England', 'Scotland', 'Wales'])",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{DDI_API_BASE_URL}}/countries",
					"host": [
						"{{DDI_API_BASE_URL}}"
					],
					"path": [
						"countries"
					]
				}
			},
			"response": []
		},
		{
			"name": "healthy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"response is ok\", function () {",
							"    pm.response.to.have.status(200);",
							"    pm.response.to.have.body(\"ok\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{DDI_API_BASE_URL}}/healthy",
					"host": [
						"{{DDI_API_BASE_URL}}"
					],
					"path": [
						"healthy"
					]
				}
			},
			"response": []
		},
		{
			"name": "healthz",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"response is ok\", function () {",
							"    pm.response.to.have.status(200);",
							"    pm.response.to.have.body(\"ok\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{DDI_API_BASE_URL}}/healthz",
					"host": [
						"{{DDI_API_BASE_URL}}"
					],
					"path": [
						"healthz"
					]
				}
			},
			"response": []
		},
		{
			"name": "counties",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"response returns a list of counties including City of London\", function () {",
							"    pm.response.to.have.status(200);",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.counties.length > 50).to.be.true;",
							"    pm.expect(jsonData.counties.some(county => county === 'City of London')).to.be.true;",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{DDI_API_BASE_URL}}/counties",
					"host": [
						"{{DDI_API_BASE_URL}}"
					],
					"path": [
						"counties"
					]
				}
			},
			"response": []
		},
		{
			"name": "insurance/companies",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"response returns a list of Insurance Companies inc Dogs Trust\", function () {",
							"    pm.response.to.have.status(200);",
							"    const jsonData = pm.response.json();",
							"    pm.expect(jsonData.companies.length > 0).to.be.true;",
							"    pm.expect(jsonData.companies[0].id).to.eq(1)",
							"    pm.expect(jsonData.companies.map(company => company.name)).to.contain('Dogs Trust')",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{DDI_API_BASE_URL}}/insurance/companies",
					"host": [
						"{{DDI_API_BASE_URL}}"
					],
					"path": [
						"insurance",
						"companies"
					]
				}
			},
			"response": []
		},
		{
			"name": "dog-breeds",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"response returns a list of Dog breeds in XL Bully\", function () {",
							"    pm.response.to.have.status(200);",
							"    const jsonData = pm.response.json();",
							"    const breeds = jsonData.breeds",
							"    pm.expect(breeds.length > 4).to.be.true;",
							"    pm.expect(breeds.some(breed => breed.breed === 'XL Bully')).to.be.true;",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{DDI_API_BASE_URL}}/dog-breeds",
					"host": [
						"{{DDI_API_BASE_URL}}"
					],
					"path": [
						"dog-breeds"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "dogId1",
			"value": ""
		},
		{
			"key": "index-number",
			"value": "",
			"type": "string"
		},
		{
			"key": "reference",
			"value": "",
			"type": "string"
		},
		{
			"key": "owner",
			"value": ""
		},
		{
			"key": "duplicateFirstName",
			"value": ""
		},
		{
			"key": "duplicateLastName",
			"value": ""
		},
		{
			"key": "ownerWithoutBirthDateRef",
			"value": "",
			"type": "string"
		},
		{
			"key": "dogIndexToDelete",
			"value": "",
			"type": "string"
		},
		{
			"key": "courtId",
			"value": "",
			"type": "string"
		},
		{
			"key": "cdosToDelete",
			"value": "",
			"type": "string"
		},
		{
			"key": "welshCdo",
			"value": "P-F2AC-29E3",
			"type": "string"
		},
		{
			"key": "policeId",
			"value": "",
			"type": "string"
		}
	]
}